<!DOCTYPE html>
<html>
<head>
  <title>SQL Practice</title>
  <script src="/static/app.js" defer></script>

  <style>
    body { margin:0; font-family:Arial; display:flex; background:#f4f6fb }
    .sidebar { width:220px; background:#1f4f5f; color:white; padding:20px }
    .menu-item { padding:10px; margin-bottom:10px; border-radius:6px }
    .menu-item.active { background:white; color:#1f4f5f; font-weight:bold }
    .menu-item a { color:inherit; text-decoration:none }

    .main { flex:1; padding:30px; display:flex; gap:20px }
    .left { width:100% }
    .right { width:35%; display:none }

    .card { background:white; padding:20px; border-radius:10px; margin-bottom:20px }
    textarea { width:100%; height:120px }

    table { border-collapse:collapse; width:100% }
    th, td { border:1px solid #ccc; padding:6px }

    button {
      background:#38bdf8;
      color:white;
      border:none;
      padding:10px 16px;
      border-radius:6px;
      margin-right:6px;
      cursor:pointer;
    }

    .progress-container {
      width:100%;
      background:#e0e0e0;
      border-radius:10px;
      height:14px;
      margin:10px 0 20px 0;
    }

    .progress-bar {
      height:100%;
      width:0%;
      background:linear-gradient(90deg,#1f4f5f,#3fa9f5);
      transition:width 0.4s ease;
    }
  </style>
</head>

<body>

<div class="sidebar">
  <h1>SQL Practice</h1>

  <div class="menu-item {% if level=='easy' %}active{% endif %}">
    <a href="/?level=easy">Easy</a>
  </div>
  <div class="menu-item {% if level=='medium' %}active{% endif %}">
    <a href="/?level=medium">Medium</a>
  </div>
  <div class="menu-item {% if level=='hard' %}active{% endif %}">
    <a href="/?level=hard">Hard</a>
  </div>
</div>

<div class="main">

  <div class="left" id="leftPanel">

    <div class="card">
      <h3>{{ q.question }}</h3>
      <p>Question {{ q.number }} of {{ q.total }}</p>
      <p><i>{{ q.hint }}</i></p>
      <button onclick="toggleTables()">ðŸ“‹ Show Tables</button>
    </div>

    <!-- âœ… PROGRESS BAR -->
    <div class="progress-container">
      <div class="progress-bar" id="progressBar"></div>
    </div>
    <p id="progressText"></p>

    <div class="card">
      <input type="hidden" id="qid" value="{{ q.id }}">
      <textarea id="sql"></textarea><br><br>

      <button onclick="runQuery()">Run</button>
      <button onclick="showAnswer()">I donâ€™t know</button>

      <form method="get" action="/" style="display:inline">
        <input type="hidden" name="level" value="{{ level }}">
        <input type="hidden" name="last_qid" value="{{ q.id }}">
        <button type="submit">âž¡ Next</button>
      </form>
    </div>

    <div class="card" id="output"></div>
  </div>

  <div class="right" id="tablePanel">
    <div class="card">
      <h4>Available Tables</h4>
      <div id="tableInfo"></div>
    </div>
  </div>

</div>
</body>
</html>
