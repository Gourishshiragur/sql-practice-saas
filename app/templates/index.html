<!DOCTYPE html>
<html>
<head>
  <title>SQL Practice</title>
  <script src="/static/app.js" defer></script>

  <style>
    body { margin:0; font-family:Arial; display:flex; background:#f4f6fb }

    .sidebar {
      width:220px; background:#1f4f5f; color:white; padding:20px
    }

    .menu-item {
      padding:10px; margin-bottom:10px; border-radius:6px
    }

    .menu-item.active {
      background:white; color:#1f4f5f; font-weight:bold
    }

    .menu-item a { color:inherit; text-decoration:none }

    .main {
      flex:1;
      padding:30px;
      display:flex;
      gap:20px;
    }

    .left {
      width:65%;
    }

    .right {
      width:35%;
    }

    .card {
      background:white;
      padding:20px;
      border-radius:10px;
      margin-bottom:20px;
      animation: fadeIn 0.3s ease;
    }

    textarea { width:100%; height:120px }

    .ok { color:green }
    .bad { color:red }

    table { border-collapse:collapse; width:100% }
    th, td { border:1px solid #ccc; padding:6px }

    /* Buttons */
    button {
      background: linear-gradient(135deg, #38bdf8, #0ea5e9);
      color: white;
      border: none;
      padding: 10px 18px;
      margin-right: 8px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.25s ease;
      box-shadow: 0 4px 10px rgba(14,165,233,0.3);
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(14,165,233,0.45);
      background: linear-gradient(135deg, #0ea5e9, #0284c7);
    }

    button:active { transform: scale(0.97) }
    button:focus { outline: none }

    @keyframes fadeIn {
      from { opacity:0; transform: translateY(8px) }
      to { opacity:1; transform: translateY(0) }
    }

    /* Progress bar */
    .progress-container {
      width: 100%;
      background: #e0e0e0;
      border-radius: 10px;
      overflow: hidden;
      height: 14px;
      margin: 10px 0 20px 0;
    }

    .progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #1f4f5f, #3fa9f5);
      transition: width 0.4s ease;
    }
  </style>
</head>

<body>

<!-- SIDEBAR -->
<div class="sidebar">
  <h1>SQL Practice</h1>

  <div class="menu-item {% if level=='easy' %}active{% endif %}">
    <a href="/?level=easy">Easy</a>
  </div>

  <div class="menu-item {% if level=='medium' %}active{% endif %}">
    <a href="/?level=medium">Medium</a>
  </div>

  <div class="menu-item {% if level=='hard' %}active{% endif %}">
    <a href="/?level=hard">Hard</a>
  </div>
</div>

<!-- MAIN -->
<div class="main">

  <!-- LEFT SIDE (UNCHANGED CONTENT) -->
  <div class="left">

    <!-- QUESTION CARD -->
    <div class="card">
      <h3 id="questionText">{{ q.question }}</h3>
      <p style="color:#666">
        Question <span id="questionNumber">{{ q.number }}</span> of
        <span id="questionTotal">{{ q.total }}</span>
      </p>
      <p><i>{{ q.hint }}</i></p>
    </div>

    <!-- PROGRESS -->
    <div class="progress-container">
      <div class="progress-bar" id="progressBar"></div>
    </div>
    <p id="progressText" style="color:#555;"></p>

    <!-- SQL INPUT -->
    <div class="card">
      <input type="hidden" id="qid" value="{{ q.id }}">
      <textarea id="sql"></textarea><br><br>

      <button onclick="runQuery()">Run</button>
      <button onclick="showAnswer()">I don’t know</button>

      <form method="get" action="/" style="display:inline" onsubmit="clearUI()">
        <input type="hidden" name="level" value="{{ level }}">
        <input type="hidden" name="last_qid" value="{{ q.id }}">
        <button type="submit">➡ Next</button>
      </form>
    </div>

    <!-- OUTPUT -->
    <div class="card" id="output"></div>

  </div>

  <!-- RIGHT SIDE (NEW – FILLS EMPTY SPACE, NO DESIGN CHANGE) -->
  <div class="right">
    <div class="card">
      <h4>Available Tables</h4>
      <div id="tableInfo"></div>
    </div>
  </div>

</div>

</body>
</html>
